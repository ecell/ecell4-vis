=======================
レジストリ
=======================

ec4vis には、アプリケーション中のデータを一時保存するためのレジストリと呼ばれるインタフェースがあります。
ec4vis の GUI 中では、ホームディレクトリ下に .ec4vis ディレクトリを作成し、その下にレジストリデータを保存します。

レジストリの操作は ec4vis.registry.Registry クラスで、 Python の shelve クラスを使って実装されています。
レジストリはセクションと呼ばれる単位に分けて保存でき、各セクションが一つの shelve ファイルに対応します。

新たにレジストリを使う場合には、以下の点に注意してください。

* GUI アプリケーション内でレジストリを使う場合には、 __init__ で作成される Registry インスタンスを経由して操作してください。複数の場所で、同時にレジストリファイルを操作した場合の動作は未定義です。
* レジストリの各セクションは、辞書のように操作できます。新たなセクションを作成した場合や、Registryインスタンスが指定のレジストリファイルを見つけられなかった場合、新たな空の shelve インスタンスが生成されます。そのため、辞書中の値を参照する場合には、キーが見つからなかった時の処理を定義しておいてください。

Registryオブジェクトからセクションを読み出すには、 load_section() を、特定のセクションをファイルに書き戻すときには unload_section を使います。現在開いている全てのセクションをファイルシステム上に同期するには、 sync() メソッドを呼び出します。

